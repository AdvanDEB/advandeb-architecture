<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2424px" preserveAspectRatio="none" style="width:851px;height:2424px;background:#FFFFFF;" version="1.1" viewBox="0 0 851 2424" width="851px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="375" x="234.25" y="27.9951">Authentication Flow - Google OAuth &amp; API Keys</text><rect fill="none" height="120.4688" style="stroke:#000000;stroke-width:1.5;" width="375" x="404.5" y="471.1875"/><rect fill="none" height="406.5313" style="stroke:#000000;stroke-width:1.5;" width="759.5" x="20" y="1022.3828"/><rect fill="none" height="366.0703" style="stroke:#000000;stroke-width:1.5;" width="824.5" x="10" y="1960.1719"/><rect fill="none" height="177.6016" style="stroke:#000000;stroke-width:1.5;" width="759.5" x="20" y="2097.7031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="118.5938" y2="2343.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="248.5" x2="248.5" y1="118.5938" y2="2343.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="451.5" x2="451.5" y1="118.5938" y2="2343.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="642.5" x2="642.5" y1="118.5938" y2="2343.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="731.5" x2="731.5" y1="118.5938" y2="2343.2422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="801.5" x2="801.5" y1="118.5938" y2="2343.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="30" y="115.292">User</text><ellipse cx="49" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M49,58.7969 L49,85.7969 M36,66.7969 L62,66.7969 M49,85.7969 L36,100.7969 M49,85.7969 L62,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="30" y="2355.2373">User</text><ellipse cx="49" cy="2367.0391" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M49,2375.0391 L49,2402.0391 M36,2383.0391 L62,2383.0391 M49,2402.0391 L36,2417.0391 M49,2402.0391 L62,2417.0391 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="210.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="217.5" y="90.9951">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="230.5" y="107.292">(Vue)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="210.5" y="2342.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="217.5" y="2362.2373">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="230.5" y="2378.5342">(Vue)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="414.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="421.5" y="90.9951">Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="422" y="107.292">(FastAPI)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="414.5" y="2342.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="421.5" y="2362.2373">Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="422" y="2378.5342">(FastAPI)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="601.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="618" y="90.9951">Google</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="608.5" y="107.292">OAuth 2.0</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="601.5" y="2342.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="618" y="2362.2373">Google</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="608.5" y="2378.5342">OAuth 2.0</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="694.5" y="115.292">MongoDB</text><path d="M714,66.2969 C714,56.2969 732,56.2969 732,56.2969 C732,56.2969 750,56.2969 750,66.2969 L750,92.2969 C750,102.2969 732,102.2969 732,102.2969 C732,102.2969 714,102.2969 714,92.2969 L714,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M714,66.2969 C714,76.2969 732,76.2969 732,76.2969 C732,76.2969 750,76.2969 750,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="694.5" y="2355.2373">MongoDB</text><path d="M714,2368.5391 C714,2358.5391 732,2358.5391 732,2358.5391 C732,2358.5391 750,2358.5391 750,2368.5391 L750,2394.5391 C750,2404.5391 732,2404.5391 732,2404.5391 C732,2404.5391 714,2404.5391 714,2394.5391 L714,2368.5391 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M714,2368.5391 C714,2378.5391 732,2378.5391 732,2378.5391 C732,2378.5391 750,2378.5391 750,2368.5391 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="779.5" y="115.292">Redis</text><path d="M784,66.2969 C784,56.2969 802,56.2969 802,56.2969 C802,56.2969 820,56.2969 820,66.2969 L820,92.2969 C820,102.2969 802,102.2969 802,102.2969 C802,102.2969 784,102.2969 784,92.2969 L784,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M784,66.2969 C784,76.2969 802,76.2969 802,76.2969 C802,76.2969 820,76.2969 820,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="779.5" y="2355.2373">Redis</text><path d="M784,2368.5391 C784,2358.5391 802,2358.5391 802,2358.5391 C802,2358.5391 820,2358.5391 820,2368.5391 L820,2394.5391 C820,2404.5391 802,2404.5391 802,2404.5391 C802,2404.5391 784,2404.5391 784,2394.5391 L784,2368.5391 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M784,2368.5391 C784,2378.5391 802,2378.5391 802,2378.5391 C802,2378.5391 820,2378.5391 820,2368.5391 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="844.5" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="160" x="342.25" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="348.25" y="154.6606">Google OAuth Flow</text><polygon fill="#181818" points="237,188.8594,247,192.8594,237,196.8594,241,192.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="243" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="56" y="187.7935">Click "Sign in with Google"</text><polygon fill="#181818" points="631,217.9922,641,221.9922,631,225.9922,635,221.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="637" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="256" y="216.9263">Redirect to OAuth consent</text><polygon fill="#181818" points="60,247.125,50,251.125,60,255.125,56,251.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="642" y1="251.125" y2="251.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="66" y="246.0591">Show consent screen</text><polygon fill="#181818" points="631,276.2578,641,280.2578,631,284.2578,635,280.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="637" y1="280.2578" y2="280.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="56" y="275.1919">Approve access</text><polygon fill="#181818" points="260,305.3906,250,309.3906,260,313.3906,256,309.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="254" x2="642" y1="309.3906" y2="309.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="266" y="304.3247">Redirect with auth code</text><polygon fill="#181818" points="440,349.6563,450,353.6563,440,357.6563,444,353.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="446" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="256" y="333.4575">POST /api/auth/google</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="256" y="348.5903">{code: "auth_code"}</text><polygon fill="#181818" points="631,378.7891,641,382.7891,631,386.7891,635,382.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="637" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="459" y="377.7231">Exchange code for tokens</text><polygon fill="#181818" points="463,423.0547,453,427.0547,463,431.0547,459,427.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="642" y1="427.0547" y2="427.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="469" y="406.856">Return user info</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="469" y="421.9888">(email, name, picture)</text><polygon fill="#181818" points="720,452.1875,730,456.1875,720,460.1875,724,456.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="456.1875" y2="456.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="459" y="451.1216">Check if user exists</text><path d="M404.5,471.1875 L468.5,471.1875 L468.5,478.3203 L458.5,488.3203 L404.5,488.3203 L404.5,471.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="120.4688" style="stroke:#000000;stroke-width:1.5;" width="375" x="404.5" y="471.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="419.5" y="484.2544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="483.5" y="483.3979">[New User]</text><polygon fill="#181818" points="720,535.7188,730,539.7188,720,543.7188,724,539.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="539.7188" y2="539.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="459" y="504.3872">Create user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="459" y="519.52">(status: pending_approval,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="459" y="534.6528">roles: [])</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="404.5" x2="779.5" y1="548.7188" y2="548.7188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="409.5" y="558.9292">[Existing User]</text><polygon fill="#181818" points="720,579.6563,730,583.6563,720,587.6563,724,583.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="583.6563" y2="583.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="459" y="578.5903">Load user + roles</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="634.9219" y2="634.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="634.9219" y2="647.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="647.9219" y2="647.9219"/><polygon fill="#181818" points="463,643.9219,453,647.9219,463,651.9219,459,647.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="459" y="614.7231">Generate JWT tokens</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="459" y="629.856">(access + refresh)</text><polygon fill="#181818" points="720,673.0547,730,677.0547,720,681.0547,724,677.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="677.0547" y2="677.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="459" y="671.9888">Store refresh token</text><polygon fill="#181818" points="790,702.1875,800,706.1875,790,710.1875,794,706.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="796" y1="706.1875" y2="706.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="459" y="701.1216">Cache session</text><polygon fill="#181818" points="260,731.3203,250,735.3203,260,739.3203,256,735.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="254" x2="451" y1="735.3203" y2="735.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="266" y="730.2544">Return tokens + user info</text><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="291" y1="764.4531" y2="764.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="291" x2="291" y1="764.4531" y2="777.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="250" x2="291" y1="777.4531" y2="777.4531"/><polygon fill="#181818" points="260,773.4531,250,777.4531,260,781.4531,256,777.4531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="256" y="759.3872">Store tokens in localStorage</text><polygon fill="#181818" points="60,802.5859,50,806.5859,60,810.5859,56,806.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="248" y1="806.5859" y2="806.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="66" y="801.52">Show dashboard</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="844.5" x="0" y="835.1523"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="835.1523" y2="835.1523"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="838.1523" y2="838.1523"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="157" x="343.75" y="824.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="349.75" y="840.6528">JWT Authentication</text><polygon fill="#181818" points="237,874.8516,247,878.8516,237,882.8516,241,878.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="243" y1="878.8516" y2="878.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="56" y="873.7856">Navigate to protected page</text><polygon fill="#181818" points="440,919.1172,450,923.1172,440,927.1172,444,923.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="446" y1="923.1172" y2="923.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="256" y="902.9185">GET /api/knowledge/facts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="256" y="918.0513">Authorization: Bearer &lt;jwt&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="952.25" y2="952.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="952.25" y2="965.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="965.25" y2="965.25"/><polygon fill="#181818" points="463,961.25,453,965.25,463,969.25,459,965.25" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="459" y="947.1841">Validate JWT signature</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="994.3828" y2="994.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="994.3828" y2="1007.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1007.3828" y2="1007.3828"/><polygon fill="#181818" points="463,1003.3828,453,1007.3828,463,1011.3828,459,1007.3828" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="459" y="989.3169">Check token expiration</text><path d="M20,1022.3828 L84,1022.3828 L84,1029.5156 L74,1039.5156 L20,1039.5156 L20,1022.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="406.5313" style="stroke:#000000;stroke-width:1.5;" width="759.5" x="20" y="1022.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="1035.4497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="99" y="1034.5933">[Token Valid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1060.6484" y2="1060.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1060.6484" y2="1073.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1073.6484" y2="1073.6484"/><polygon fill="#181818" points="463,1069.6484,453,1073.6484,463,1077.6484,459,1073.6484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="459" y="1055.5825">Extract user_id + roles</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1102.7813" y2="1102.7813"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1102.7813" y2="1115.7813"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1115.7813" y2="1115.7813"/><polygon fill="#181818" points="463,1111.7813,453,1115.7813,463,1119.7813,459,1115.7813" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="459" y="1097.7153">Check permissions</text><polygon fill="#181818" points="720,1140.9141,730,1144.9141,720,1148.9141,724,1144.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="1144.9141" y2="1144.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="459" y="1139.8481">Query data</text><polygon fill="#181818" points="260,1170.0469,250,1174.0469,260,1178.0469,256,1174.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="254" x2="451" y1="1174.0469" y2="1174.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="266" y="1168.981">Return data</text><polygon fill="#181818" points="60,1199.1797,50,1203.1797,60,1207.1797,56,1203.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="248" y1="1203.1797" y2="1203.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="66" y="1198.1138">Display content</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="779.5" y1="1212.1797" y2="1212.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="25" y="1222.3901">[Token Expired]</text><polygon fill="#181818" points="260,1243.1172,250,1247.1172,260,1251.1172,256,1247.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="254" x2="451" y1="1247.1172" y2="1247.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="266" y="1242.0513">401 Unauthorized</text><polygon fill="#181818" points="440,1287.3828,450,1291.3828,440,1295.3828,444,1291.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="446" y1="1291.3828" y2="1291.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="256" y="1271.1841">POST /api/auth/refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="256" y="1286.3169">{refresh_token}</text><polygon fill="#181818" points="720,1316.5156,730,1320.5156,720,1324.5156,724,1320.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="1320.5156" y2="1320.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="459" y="1315.4497">Validate refresh token</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1349.6484" y2="1349.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1349.6484" y2="1362.6484"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1362.6484" y2="1362.6484"/><polygon fill="#181818" points="463,1358.6484,453,1362.6484,463,1366.6484,459,1362.6484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="459" y="1344.5825">Generate new access token</text><polygon fill="#181818" points="260,1387.7813,250,1391.7813,260,1395.7813,256,1391.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="254" x2="451" y1="1391.7813" y2="1391.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="266" y="1386.7153">Return new access token</text><polygon fill="#181818" points="440,1416.9141,450,1420.9141,440,1424.9141,444,1420.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="446" y1="1420.9141" y2="1420.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="256" y="1415.8481">Retry original request</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="844.5" x="0" y="1456.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="1456.4805" y2="1456.4805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="844.5" y1="1459.4805" y2="1459.4805"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="187" x="328.75" y="1445.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="334.75" y="1461.981">API Key Authentication</text><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="91" y1="1500.1797" y2="1500.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="91" x2="91" y1="1500.1797" y2="1513.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="50" x2="91" y1="1513.1797" y2="1513.1797"/><polygon fill="#181818" points="60,1509.1797,50,1513.1797,60,1517.1797,56,1513.1797" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="56" y="1495.1138">Generate API key via UI</text><polygon fill="#181818" points="440,1553.4453,450,1557.4453,440,1561.4453,444,1557.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="446" y1="1557.4453" y2="1557.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="56" y="1537.2466">POST /api/api-keys</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="56" y="1552.3794">Authorization: Bearer &lt;jwt&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1601.7109" y2="1601.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1601.7109" y2="1614.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1614.7109" y2="1614.7109"/><polygon fill="#181818" points="463,1610.7109,453,1614.7109,463,1618.7109,459,1614.7109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="459" y="1581.5122">Validate user role</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="459" y="1596.645">(Curator or Analyst)</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1658.9766" y2="1658.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1658.9766" y2="1671.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1671.9766" y2="1671.9766"/><polygon fill="#181818" points="463,1667.9766,453,1671.9766,463,1675.9766,459,1671.9766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="459" y="1638.7778">Generate random key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="459" y="1653.9106">(256-bit)</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1701.1094" y2="1701.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1701.1094" y2="1714.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1714.1094" y2="1714.1094"/><polygon fill="#181818" points="463,1710.1094,453,1714.1094,463,1718.1094,459,1714.1094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="459" y="1696.0435">Hash key (SHA-256)</text><polygon fill="#181818" points="720,1739.2422,730,1743.2422,720,1747.2422,724,1743.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="1743.2422" y2="1743.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="459" y="1738.1763">Store key hash + metadata</text><polygon fill="#181818" points="60,1783.5078,50,1787.5078,60,1791.5078,56,1787.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="451" y1="1787.5078" y2="1787.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="66" y="1767.3091">Show key ONCE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="66" y="1782.4419">(advk_abc123...)</text><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="91" y1="1816.6406" y2="1816.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="91" x2="91" y1="1816.6406" y2="1829.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="50" x2="91" y1="1829.6406" y2="1829.6406"/><polygon fill="#181818" points="60,1825.6406,50,1829.6406,60,1833.6406,56,1829.6406" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="56" y="1811.5747">Use API key in scripts</text><polygon fill="#181818" points="440,1869.9063,450,1873.9063,440,1877.9063,444,1873.9063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="446" y1="1873.9063" y2="1873.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="56" y="1853.7075">GET /api/knowledge/search</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="56" y="1868.8403">Authorization: Bearer advk_abc123...</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1903.0391" y2="1903.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1903.0391" y2="1916.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="1916.0391" y2="1916.0391"/><polygon fill="#181818" points="463,1912.0391,453,1916.0391,463,1920.0391,459,1916.0391" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="459" y="1897.9731">Hash provided key</text><polygon fill="#181818" points="720,1941.1719,730,1945.1719,720,1949.1719,724,1945.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="1945.1719" y2="1945.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="459" y="1940.106">Lookup key hash</text><path d="M10,1960.1719 L74,1960.1719 L74,1967.3047 L64,1977.3047 L10,1977.3047 L10,1960.1719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="366.0703" style="stroke:#000000;stroke-width:1.5;" width="824.5" x="10" y="1960.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="1973.2388">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="70" x="89" y="1972.3823">[Key Valid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="1998.4375" y2="1998.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="1998.4375" y2="2011.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="2011.4375" y2="2011.4375"/><polygon fill="#181818" points="463,2007.4375,453,2011.4375,463,2015.4375,459,2011.4375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="459" y="1993.3716">Check expiration</text><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="494" y1="2040.5703" y2="2040.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="494" y1="2040.5703" y2="2053.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="453" x2="494" y1="2053.5703" y2="2053.5703"/><polygon fill="#181818" points="463,2049.5703,453,2053.5703,463,2057.5703,459,2053.5703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="459" y="2035.5044">Check scopes</text><polygon fill="#181818" points="790,2078.7031,800,2082.7031,790,2086.7031,794,2082.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="796" y1="2082.7031" y2="2082.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="459" y="2077.6372">Check rate limit</text><path d="M20,2097.7031 L84,2097.7031 L84,2104.8359 L74,2114.8359 L20,2114.8359 L20,2097.7031 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="177.6016" style="stroke:#000000;stroke-width:1.5;" width="759.5" x="20" y="2097.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="2110.77">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="97" x="99" y="2109.9136">[Rate Limit OK]</text><polygon fill="#181818" points="720,2131.9688,730,2135.9688,720,2139.9688,724,2135.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="2135.9688" y2="2135.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="459" y="2130.9028">Query data</text><polygon fill="#181818" points="720,2161.1016,730,2165.1016,720,2169.1016,724,2165.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="2165.1016" y2="2165.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="459" y="2160.0356">Update key last_used_at</text><polygon fill="#181818" points="720,2190.2344,730,2194.2344,720,2198.2344,724,2194.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="452" x2="726" y1="2194.2344" y2="2194.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="459" y="2189.1685">Log audit entry</text><polygon fill="#181818" points="60,2219.3672,50,2223.3672,60,2227.3672,56,2223.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="451" y1="2223.3672" y2="2223.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="66" y="2218.3013">Return data</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="779.5" y1="2232.3672" y2="2232.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="25" y="2242.5776">[Rate Limit Exceeded]</text><polygon fill="#181818" points="60,2263.3047,50,2267.3047,60,2271.3047,56,2267.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="451" y1="2267.3047" y2="2267.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="66" y="2262.2388">429 Too Many Requests</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="834.5" y1="2283.3047" y2="2283.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133" x="15" y="2293.5151">[Key Invalid/Expired]</text><polygon fill="#181818" points="60,2314.2422,50,2318.2422,60,2322.2422,56,2318.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="451" y1="2318.2422" y2="2318.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="66" y="2313.1763">401 Unauthorized</text><!--SRC=[dLR1Sjis4BtpAtPqQAE9RILEcfbgwioObfIuTkmqjjD3tT6iIOX2HG4i04bMC_dtxW8mIr9A3iqb6kp3szs7jql_2AShDnVAoGoTr0ecfTx0I69XS0apRU0qNwCQZLEuK7fJYhmGaAvacGkJ94wwKknbE8HtMXSKlEOe_02d7y_XGcnjac3cYFRE4a65Xgx92fM3tiHevOJAxzMppolHxm5Qc8pRc1IpHO1Cq3hY3B2q0mkvxrL8VdpqmgF2QPAZmmUq0deVj2hqAFN1KTe8V1AvjFxO_qgIavDsFxx7avCauJRWy2qL2aCuAsMsWDwDB1H81Hj9o72jbn20O95aw7cDo1mu7IaphIofc4G8WJtt46xcb2j6mMP625MdhVbEgyhejG3CCc5jWyGNLcVp9M58bujOLCgGZzStjp30IWuuF2YYWbyODuGU7qxvT-zhahPR6JzcSrHa2mvxopXDZzGi8Wr5k9LHiEBIfPffUaInH5aUWCAbE81APWGG_SW_IbdHkI15vIpS4e_IEfjWwU1AR8A5WFurBnY1JdWuyLk7RcM7K95df2gcw5N2yk1U6LqAYlpnPpyH9RtvcBa9ivVrKcCUIdWE_c92XB5EtzixeOJXnB_-VXlRf_JXCVYEc1bXvwtMRcWAn5Cat8bXxpdk1REv04iKD5OnDcae6V8GVIrfV50F2lmHGsuiTOOb7sBnzF1DW-LevmyQJUxDpcrqndh7xLUubWNtJ1OcMHtvI-HG_KSVb1b7MosUriTWHXk0v65-RUG_ddu8gK13xB_yjN5lcz9-nbBcJz9Q6YrabpGHmII-Kx989Ordz3QvzOUUel6c_jRuqHagn8itbNdziXrO8A-4MKh_3hRhZTzMmco1TqSZqdocEjGIVIHjLUAM1zlns7iJXdB7t8F8ktIlNxo4EuLHjHZ_zWH7Pz48nrzJhz3NRlsrlcqhTcIe3QveyAAlky1cqtjXZM89HgfH8uLKM5BklrV2EZzMxB_ujVYU1wEETM5yPK5NrXBXxho6TQMfv26X_eVz_92nHMYmprQKaXOTVnwf_Arr_RtRmA3AzPBBeal7FxqvV91jv7kQEb_rivltfuU4sBCYE3ndt7DO2eVUJkdE_3Bg-kfip6idNo-c-92zF7vrT7JKtv6C_glLeiL0dnHPqLfjIxPdRYr9bCs_fLmxwqwJl7XbJWk2iYQjrQeNgwfkqayjl_pUcGt3s9ZnlN6RwQeroFL2zM7_CgLSIkSXdF0J7rto4LnV-DFl3tadUbTvXt0F9VrPCYMhv5Dq-w2Nkg3lRqw9oDPcsu741-ek3hyR6ZNI5rU8F6w0dTklZt-cHQBX0wejKVd12chmT7ak5lXShLdYmUwsUUBfxXk-_Yy0]--></g></svg>