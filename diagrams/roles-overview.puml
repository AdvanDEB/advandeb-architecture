@startuml
!theme plain

title AdvanDEB Platform - User Roles & Capabilities

skinparam rectangle {
    BackgroundColor<<base>> LightYellow
    BackgroundColor<<capability>> LightBlue
    BorderColor Black
}

rectangle "**Administrator**\n(System Authority)" as Admin <<base>> #FF6B6B {
    (Full system access)
    (User management)
    (System configuration)
    (Day Zero seeding)
    (Override any decision)
}

rectangle "**Knowledge Curator**\n(Contributor)" as Curator <<base>> #FFA500 {
    rectangle "Base Permissions" as CuratorBase {
        (Upload documents)
        (Suggest facts & nodes)
        (Suggest updates)
        (View knowledge)
        (Create models)
    }
    
    rectangle "Optional Capabilities" as Caps {
        rectangle "**+ Knowledge Creation**" as CreationCap <<capability>> {
            (Create facts directly)
            (Build graphs)
            (Edit own content)
            (Faster workflow)
        }
        
        rectangle "**+ Agent Access**" as AgentCap <<capability>> {
            (Run AI agents)
            (Custom tools)
            (Agent logs)
        }
        
        rectangle "**+ Analytics Access**" as AnalyticsCap <<capability>> {
            (Bulk export)
            (API keys)
            (Advanced queries)
        }
        
        rectangle "**+ Reviewer Status**" as ReviewerCap <<capability>> {
            (Review suggestions)
            (Approve/reject)
            (Quality control)
        }
    }
}

rectangle "**Knowledge Explorator**\n(Read-Only User)" as Explorator <<base>> #90EE90 {
    (Browse knowledge)
    (Search content)
    (View graphs/models)
    (Export small datasets)
}

Admin -down-> Curator : manages
Curator -down-> Explorator : can read like

note right of Curator
    **Capability Request Model**
    
    Base curators can upload and suggest
    content. Additional capabilities unlock:
    
    • Knowledge Creation - create directly
    • Agent Access - for AI operations
    • Analytics Access - for data analysis
    • Reviewer Status - to approve others
    
    Multiple capabilities can be combined!
    
    **Progression:**
    Suggest → Create → Review
end note

legend left
    **Role Model:**
    • 3 base roles (Administrator, Curator, Explorator)
    • 4 optional capabilities (Creation, Agent, Analytics, Reviewer)
    • Capabilities can be combined
    • Graduated access through request workflow
    
    **Base Curator = Suggestion-based**
    Add Knowledge Creation capability for direct creation
    
    **Authentication:**
    • Google OAuth 2.0
    • API Keys (capability-based scopes)
    • JWT Tokens
end legend

@enduml
